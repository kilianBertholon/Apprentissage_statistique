---
title: "Projet_AS"
author: "kilian_ber"
date: "2023-11-16"
output: html_document
---

```{r}
#### Chargement des packages ####

library(jsonlite)
library(tidyr)
library(ggplot2)
library(dplyr)




year_available <- 2019:2023

for (annee in year_available) {
  fichier_data <- paste0("resultat_football_", annee, ".json")
  data <- fromJSON(fichier_data)
  
  top10 <- data$Top10_championnat
  hors_top10 <- data$Autres
  
  data <- rbind(top10, hors_top10)
  data = data[-1]
  
  data <- separate(data, info, into = c("Poste", "Club", "Age"), sep = ",\\s*")
  
  data$Age <- sub("yrs", "", data$Age)
  data$Passes_perc <- (as.numeric(sub("%", "", data$Passes_perc)))
  
  data <- data %>% rename(Apparences = CartonJaune)
  
  cols_to_convert <- c("Age", "minJ", "Apparences", "But", "PasseDecisive", "Note", "Tirs",
                       "Dribbles", "moy_passes", "centre_perc", "degagement", "interception",
                       "tacle", "tirsBloques", "driblesSubis", "fautes", "TaclesRecu", "HorsJeu")
  
  data[, cols_to_convert] <- lapply(data[, cols_to_convert], function(x) as.numeric(gsub("'", "", x)))
  
  data$Annee <- as.character(annee)
  
  assign(paste0("data_", annee), data)
}


all_data <- rbind(data_2023, data_2022, data_2021, data_2020, data_2019)

summary(all_data)

```
